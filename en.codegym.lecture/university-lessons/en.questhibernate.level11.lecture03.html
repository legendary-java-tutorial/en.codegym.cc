Different ways to get an object
<p>----------------------------------------</p>
get() method. load() method. find() method. refresh() method.
<p>----------------------------------------</p>
n object by its ID (or Primary Key), then Hibernate has three methods for this:</p>
<ul>
 <li><span class="code text-orange">load()</span></li>
 <li><span class="code text-orange">get()</span></li>
 <li><span class="code text-orange">find()</span></li>
</ul>
<p>They do the same thing, but there are nuances. The general format of the <span class="code text-orange">get()</span> method is:</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java"><span class="token class-name">EntityClass</span> Name <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">EntityClass</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Object</span> primaryKey<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><span class="code text-orange">The get()</span> method takes as its second parameter the ID (Primary Key) of the object it needs to return. It then loads that object from the database and returns it. Example:</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java"><span class="token class-name">User</span> user <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>If a record with this ID is not found in the database, then the method will return null.</p>
<h2>load() method</h2>
<p>The second method for loading an object is <span class="code text-orange">the load()</span> method . The general format of <span class="code text-orange">the load()</span> method is the same:</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java"><span class="token class-name">EntityClass</span> Name <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">EntityClass</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Object</span> primaryKey<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>However, its behavior is different from the <span class="code text-orange">get()</span> method .</p>
<p>First, this method does not return a real object, but a proxy: a virtual stub.</p>
<p>Secondly, when using the <span class="code text-orange">load()</span> method , there is no check whether there is such an entry in the database. Instead, Hibernate immediately creates a proxy object with the passed ID and returns it.</p>
<p>Thirdly, all work with the database will occur when calling the methods of the proxy object. If you try to call, for example, <span class="code text-orange">the getName()</span> method , then the first call to the database will occur. Example:</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class=" language-java"><span class="token class-name">User</span> user <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> name <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//this is where the first call to the database will occur</span></code></pre>
<p><span class="code text-orange">The load()</span> method should not be used to check for the presence of objects in the database - it simply will not show this. In addition, if you pass an invalid ID, such as null, to it, it will simply return null.</p>
<h2>find() method</h2>
<p><span class="code text-orange">The find()</span> method was passed on to the <span class="text-neon"><span class="text-bold"><em>Session</em></span></span> interface from the JPA standard. And as you know, this standard describes not just the signature of methods, but also regulates the behavior.</p>
<p>This method works exactly like the <span class="code text-orange">get()</span> method . If the object was not found by the passed key, then the method will simply return null.</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span></span><code class=" language-java"><span class="token class-name">User</span> user <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//method will return null</span></code></pre>
<h2>refresh() method</h2>
<p>Another useful method that has to do with loading an object from a database is the <span class="code text-orange">refresh()</span> method .</p>
<p>Remember the <span class="code text-orange">persist()</span> method that updated the data in the database based on the passed object? So, the <span class="code text-orange">refresh()</span> method works exactly the opposite: it updates an existing object based on data from the database.</p>
<p>This behavior is necessary if, for example, when writing an object to the database, various stored procedures are called there that correct the written data.</p>
<p>In such cases, it can be useful to reread the object from the database if there is a chance that it has changed. Example:</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"Kolyan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
session<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
session<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//Force called SQL INSERT and call triggers</span>

session<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// here we continue to work with the updated object</span></code></pre>