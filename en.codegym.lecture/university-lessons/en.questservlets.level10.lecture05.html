Working with cookies
<p>----------------------------------------</p>
CookieManager
<p>----------------------------------------</p>
<h2>6.1 CookieManager</h2>
<p>As you already know, the http server can send cookies along with the response, and you will need to work with them. Or vice versa, the http server is waiting for the client to send it Cookies and you need to add them to your http request. Of course, you can do this directly through the headers (handlers), but HttpClient offers you a more convenient mechanism - the <code>CookieHandler</code>. You can get it using the <code>cookieHandler()</code>. Example:</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span><code class=" language-java"><span class="token class-name">HttpClient</span> <span class="text-red">client</span> <span class="token operator">=</span> <span class="token class-name">HttpClient</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span> URI<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"https://codegym.cc"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">CookieHandler</span> handler <span class="token operator">=</span> <span class="text-red">client</span><span class="token punctuation">.</span><span class="token function"><span class="text-orange">cookieHandler</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>CookieHandler is an abstract class, so it's common to work with its CookieManager implementation. Which, in turn, has only a couple of methods through which you can get the CookieStore object. You can work with it in the future:</p>
<pre class=" line-numbers language-java" tabindex="0"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-java"><span class="token class-name">HttpClient</span> <span class="text-red">client</span> <span class="token operator">=</span> <span class="token class-name">HttpClient</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span> URI<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"https://codegym.cc"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">CookieHandler</span> <span class="text-viola">handler</span> <span class="token operator">=</span> <span class="text-red">client</span><span class="token punctuation">.</span><span class="token function">cookieHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"></span><span class="text-user"><span class="token class-name">CookieManager</span> manager</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name"><span class="text-user">CookieManager</span></span><span class="token punctuation">)</span> <span class="text-viola">handler</span><span class="token punctuation">;</span>
<span class="token class-name"></span><span class="text-green"><span class="token class-name">CookieStore</span> store</span> <span class="token operator">=</span> <span class="text-red">manager</span><span class="token punctuation">.</span><span class="token function"><span class="text-orange">getCookieStore</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>CookieStore is an interface that has the following methods:</p>
<ul>
 <li><code>add()</code></li>
 <li><code>get()</code></li>
 <li><code>getCookies()</code></li>
 <li><code>remove()</code></li>
 <li><code>removeAll()</code></li>
</ul>
<p>I won't go through them in detail, we've already covered HttpClient in detail. If suddenly you really need it, then the documentation on the CookieManager class can be found at the links:</p>
<p><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/net/CookieManager.html" target="_blank">Class CookieManager</a></p>
<p><a href="https://www.geeksforgeeks.org/java-net-cookiemanager-class-in-java/" target="_blank">CookieManager Class in Java</a></p>
<p><a href="https://docs.oracle.com/javase/tutorial/networking/cookies/custom.html" target="_blank">Custom CookieManager</a></p>