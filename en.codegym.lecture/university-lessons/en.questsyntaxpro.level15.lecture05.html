Working with files in Java
<p>----------------------------------------</p>
Files class. To work with files, there is a slick utility class — java.nio.file.Files. It has methods for every occasion. All the methods of this class are static and operate on Path object. There are a lot of methods, so we will consider only the most important ones: Method Description
<p>----------------------------------------</p>
<h2>1. <code>Files</code> class</h2>
<p><img data-max-width="1024" data-id="7bd44159-0b87-4df2-b82a-00aac01147cd" src="https://cdn.codegym.cc/images/article/7bd44159-0b87-4df2-b82a-00aac01147cd/1024.jpeg" alt="Files class"></p>
<p>To work with files, there is a slick utility class — <code><span class="text-red">java.nio.file.Files</span></code>. It has methods for every occasion. All the methods of this class are static and operate on Path object. There are a lot of methods, so we will consider only the most important ones:</p>
<table>
    <tbody>
    <tr>
        <th width="55%">Method</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>
            <pre><code>Path <span class="text-red">createFile</span>(Path path)</code></pre>
        </td>
        <td>Creates a new file whose path is <code>path</code></td>
    </tr>
    <tr>
        <td>
            <pre><code>Path <span class="text-red">createDirectory</span>(Path path)</code></pre>
        </td>
        <td>Creates a new directory</td>
    </tr>
    <tr>
        <td>
            <pre><code>Path <span class="text-red">createDirectories</span>(Path path)</code></pre>
        </td>
        <td>Creates multiple directories</td>
    </tr>
    <tr>
        <td>
            <pre><code>Path <span class="text-red">createTempFile</span>(prefix, suffix)</code></pre>
        </td>
        <td>Creates a temporary file</td>
    </tr>
    <tr>
        <td>
            <pre><code>Path <span class="text-red">createTempDirectory</span>(prefix)</code></pre>
        </td>
        <td>Creates a temporary directory</td>
    </tr>
    <tr>
        <td>
            <pre><code>void <span class="text-red">delete</span>(Path path)</code></pre>
        </td>
        <td>Deletes a file or directory if it is empty</td>
    </tr>
    <tr>
        <td>
            <pre><code>Path <span class="text-red">copy</span>(Path src, Path dest)</code></pre>
        </td>
        <td>Copies a file</td>
    </tr>
    <tr>
        <td>
            <pre><code>Path <span class="text-red">move</span>(Path src, Path dest)</code></pre>
        </td>
        <td>Moves a file</td>
    </tr>
    <tr>
        <td>
            <pre><code>boolean <span class="text-red">isDirectory</span>(Path path)</code></pre>
        </td>
        <td>Checks whether the path is a directory and not a file</td>
    </tr>
    <tr>
        <td>
            <pre><code>boolean <span class="text-red">isRegularFile</span>(Path path)</code></pre>
        </td>
        <td>Checks whether the path is a file and not a directory</td>
    </tr>
    <tr>
        <td>
            <pre><code>boolean <span class="text-red">exists</span>(Path path)</code></pre>
        </td>
        <td>Checks whether an object exists at the given path</td>
    </tr>
    <tr>
        <td>
            <pre><code>long <span class="text-red">size</span>(Path path)</code></pre>
        </td>
        <td>Returns the file size</td>
    </tr>
    <tr>
        <td>
            <pre><code>byte[] <span class="text-red">readAllBytes</span>(Path path)</code></pre>
        </td>
        <td>Returns the entire contents of a file as an array of bytes</td>
    </tr>
    <tr>
        <td>
            <pre><code>String <span class="text-red">readString</span>(Path path)</code></pre>
        </td>
        <td>Returns the entire contents of a file as a string</td>
    </tr>
    <tr>
        <td>
            <pre><code>List&lt;String&gt; <span class="text-red">readAllLines</span>(Path path)</code></pre>
        </td>
        <td>Returns the entire contents of a file as a list of strings</td>
    </tr>
    <tr>
        <td>
            <pre><code>Path <span class="text-red">write</span>(Path path, byte[])</code></pre>
        </td>
        <td>Writes an array of bytes to a file</td>
    </tr>
    <tr>
        <td>
            <pre><code>Path <span class="text-red">writeString</span>(Path path, String str)</code></pre>
        </td>
        <td>Writes a string to a file</td>
    </tr>
    <tr>
        <td>
            <pre><code>DirectoryStream&lt;Path&gt; <span class="text-red">newDirectoryStream</span>(Path dir)</code></pre>
        </td>
        <td>Returns a collection of files (and subdirectories) from the given directory</td>
    </tr>
    </tbody>
</table>
<hr>
<h2>2. Creating files and directories</h2>
<p>Files and directories are very easy to create. Let's convince ourselves with some examples:</p>
<table>
    <tbody>
    <tr>
        <th>Code</th>
        <th>Note</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>Files.<span class="text-red">createFile</span>(Path.of(<span class="text-green">"c:\\readme.txt"</span>));</code></pre>
        </td>
        <td>Creates a file</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>Files.<span class="text-red">createDirectory</span>(Path.of(<span class="text-green">"c:\\test"</span>));</code></pre>
        </td>
        <td>Creates a directory</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>Files.<span class="text-red">createDirectories</span>(Path.of(<span class="text-green">"c:\\test\\1\\2\\3"</span>));</code></pre>
        </td>
        <td>Creates a directory and all the necessary subdirectories if they do not exist.</td>
    </tr>
    </tbody>
</table>
<hr>
<h2>3. Copying, moving and deleting</h2>
<p>Copying, moving and deleting files is just as easy. This also applies to directories, but they must be empty.</p>
<table>
    <tbody>
    <tr>
        <th>Code</th>
        <th>Note</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Path path1 = Path.of(<span class="text-green">"c:\\readme.txt"</span>);
Path path2 = Path.of(<span class="text-green">"c:\\readme-copy.txt"</span>);
Files.<span class="text-red">copy</span>(path1, path2);</code></pre>
        </td>
        <td>Copies a file</td>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Path path1 = Path.of(<span class="text-green">"c:\\readme.txt"</span>);
Path path2 = Path.of(<span class="text-green">"d:\\readme-new.txt")</span>;
Files.<span class="text-red">move</span>(path1, path2);</code></pre>
        </td>
        <td>Moves and renames a file</td>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Path path = Path.of(<span class="text-green">"d:\\readme-new.txt"</span>);
Files.<span class="text-red">delete</span>(path);</code></pre>
        </td>
        <td>Deletes a file</td>
    </tr>
    </tbody>
</table>
<hr>
<h2>4. Checking a file's type and existence</h2>
<p>When you have a path provided by someone else, you want to know whether it is a file or a directory. And in general, does such a file/directory exist or not?</p>
<p>There are special methods for this as well. You can also easily find out the length of a file:</p>
<table>
    <tbody>
    <tr>
        <th width="65%">Code</th>
        <th>Note</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>Files.<span class="text-red">isRegularFile</span>(<span class="code">Path.of(<span class="text-green">"c:\\readme.txt"</span>)</span>);</code></pre>
        </td>
        <td>
            <pre><code>true</code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>Files.<span class="text-red">isDirectory</span>(<span class="code">Path.of(<span class="text-green">"c:\\test"</span>)</span>);</code></pre>
        </td>
        <td>
            <pre><code>true</code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code> Files.<span class="text-red">exists</span>(<span class="code">Path.of(<span class="text-green">"c:\\test\\1\\2\\3"</span>)</span>);</code></pre>
        </td>
        <td>
            <pre><code>false</code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>Files.<span class="text-red">size</span>(<span class="code">Path.of(<span class="text-green">"c:\\readme.txt"</span>)</span>);</code></pre>
        </td>
        <td>
            <pre><code>10112</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<hr>
<h2>5. Working with file contents</h2>
<p>Finally, there are a whole series of methods that make it easy to read or write the contents of a file. Example:</p>
<table>
    <tbody>
    <tr>
        <th>Code</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Path <span class="code text-green">path</span> = Path.of(<span class="text-green">"c:\\readme.txt"</span>);
List&lt;String&gt; <span class="code text-user">list</span> = Files.<span class="text-red">readAllLines</span>(<span class="code text-green">path</span>);

for (String <span class="code text-orange">str</span> : <span class="code text-user">list</span>)
   System.out.println(<span class="code text-orange">str</span>);</code></pre>
        </td>
        <td><br>Read the contents of the file as a list of strings.<br><br>
            Display the strings
        </td>
    </tr>
    </tbody>
</table>
<hr>
<div class="task-widget-container" showCover="true" taskKey="en.codegym.task.pro.task15.task1516"></div>
<div class="task-widget-container" showCover="true" taskKey="en.codegym.task.pro.task15.task1517"></div>
<hr>
<h2>6. Getting the contents of a directory</h2>
<p>The most interesting method still remains. It is used to get files and subdirectories in a given directory.</p>
<p>We are talking about the <code>newDirectoryStream()</code> method, which returns a special <code>DirectoryStream&lt;Path&gt;</code> object. It has an iterator(!) that you can use to get all the files and subdirectories of a given directory.</p>
<p>This is easier than it sounds.</p>
<table>
    <tbody>
    <tr>
        <th>Code</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Path <span class="code text-green">path</span> = Path.of(<span class="text-green">"c:\\windows"</span>);

try (<span class="text-neon">DirectoryStream</span>&lt;<span class="text-viola">Path</span>&gt; <span class="code text-user">files</span> = <span class="text-neon">Files</span>.newDirectoryStream(<span class="code text-green">path</span>)) {
   for (<span class="text-viola">Path</span> <span class="code text-orange">path</span> : <span class="code text-user">files</span>)
      System.out.println(<span class="code text-orange">path</span>);
}</code></pre>
        </td>
        <td><br><br>Get an object with a list of files<br>
            <span>Loop over the list of files</span></td>
    </tr>
    </tbody>
</table>
<p>The <code>DirectoryStream&lt;Path&gt;</code> object has two properties. First, it has an iterator that returns file paths, and we can use this object inside a <code>for-each</code> loop.</p>
<p><span class="text-orange">And second, this object is a data stream, so it must be explicitly closed using the <code><span class="text-orange">close()</span></code> method, or declared use inside a <code>try-with-resources</code> block.</span></p>
<hr>
<div class="task-widget-container" showCover="true" taskKey="en.codegym.task.pro.task15.task1518"></div>
<div class="task-widget-container" showCover="true" taskKey="en.codegym.task.pro.task15.task1519"></div>
<div class="task-widget-container" showCover="true" taskKey="en.codegym.task.pro.task15.task1520"></div>
<hr>
<h2>7. <code>Files.newInputStream</code> method</h2>
<p>Starting with Java 5, the <code>FileInputStream</code> and <code>FileOutputStream</code> classes have been deprecated. One of their disadvantages was that when objects of these classes are created, files are immediately created on disk. And all exceptions related to file creation could potentially be thrown.</p>
<p>Later this was recognized as not the best decision. Accordingly, it is recommended to use the methods of the <code>java.nio.Files</code> utility class to create file objects.</p>
<p>Here's a comparison between the old approach and the new approach to creating files:</p>
<table>
    <tr>
        <th>Before</th>
    </tr>
    <tr>
        <td>
                <pre class="language-java"><code>String <span class="code text-green">src</span> = "c:\\projects\\log.txt";
InputStream <span class="code text-user">input</span> = new FileInputStream(<span class="code text-green">src</span>);</code></pre>
        </td>
    </tr>
    <tr>
        <th>After</th>
    </tr>
    <tr>
        <td>
                <pre class="language-java"><code>String <span class="code text-green">src</span> = "c:\\projects\\log.txt";
InputStream <span class="code text-user">input</span> = Files.newInputStream( Path.of(<span class="code text-green">src</span>) );</code></pre>
        </td>
    </tr>
</table>
<p>And there is a similar replacement for <code>FileOutputStream</code>:</p>
<table>
    <tr>
        <th>Before</th>
    </tr>
    <tr>
        <td>
                <pre class="language-java"><code>String <span class="code text-green">src</span> = "c:\\projects\\log.txt";
OutputStream  <span class="code text-user">output</span> = new FileOutputStream( <span class="code text-green">src</span> );</code></pre>
        </td>
    </tr>
    <tr>
        <th>After</th>
    </tr>
    <tr>
        <td>
                <pre class="language-java"><code>String <span class="code text-green">src</span> = "c:\\projects\\log.txt";
OutputStream  <span class="code text-user">output</span> = Files.newOutputStream( Path.of( <span class="code text-green">src</span> ) );</code></pre>
        </td>
    </tr>
</table>
<hr>